<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Admin ‚Äî Evan Portfolio</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <style>
      body { background: #f8f9fa; font-family: Inter, system-ui, sans-serif; }
      .sidebar { background: #212529; min-height: 100vh; padding: 2rem 1rem; }
      .sidebar a { color: #adb5bd; text-decoration: none; display: block; margin-bottom: 1rem; }
      .sidebar a.active { color: #fff; font-weight: 600; }
      .container-fluid { max-width: 1400px; }
      .project-form { background: #fff; padding: 2rem; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,.08); }
      .tag-input { display: flex; gap: 0.5rem; flex-wrap: wrap; padding: 0.5rem; background: #f8f9fa; border-radius: 4px; min-height: 38px; }
      .tag-badge { background: #4f46e5; color: #fff; padding: 0.25rem 0.75rem; border-radius: 12px; display: flex; align-items: center; gap: 0.5rem; font-size: 0.875rem; }
      .tag-badge button { background: none; border: none; color: #fff; cursor: pointer; font-size: 1rem; padding: 0; }
      .project-item { background: #fff; padding: 1.5rem; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,.08); margin-bottom: 1rem; }
      .project-item h5 { margin-bottom: 0.5rem; color: #0f172a; }
      .project-item .badge { margin-right: 0.5rem; }
    </style>
  </head>
  <body>
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-3 sidebar">
          <div class="mb-4">
            <h4 class="text-light">Portfolio Admin</h4>
            <p class="text-muted small">Manage your projects</p>
          </div>
          <a href="#" class="nav-link active" data-section="profile">Profile Photo</a>
          <a href="#" class="nav-link" data-section="list">Projects List</a>
          <a href="#" class="nav-link" data-section="new">New Project</a>
          <a href="index.html" class="text-decoration-none text-info mt-4" title="Back to portfolio">‚Üê Back to Portfolio</a>
        </div>

        <div class="col-md-9 p-4">
          <section id="profile" class="section">
            <h2 class="mb-3">Profile Photo</h2>
            <div class="project-form">
              <div class="mb-3">
                <label class="form-label"><strong>Current Profile Photo</strong></label>
                <img id="currentProfile" src="https://via.placeholder.com/280x380/4f46e5/ffffff?text=Your+Photo" alt="Profile" style="max-width:280px; border-radius:8px; margin-bottom:1rem; display:block;">
              </div>
              <div class="mb-3">
                <label class="form-label"><strong>Upload New Photo</strong></label>
                <input type="file" class="form-control" id="photoInput" accept="image/*">
                <small class="text-muted d-block mt-2">‚úì Recommended: 280√ó380px, JPG or PNG (portrait)</small>
              </div>
              <button class="btn btn-primary me-2" onclick="uploadProfilePhoto()">üíæ Save Profile Photo</button>
              <button class="btn btn-outline-secondary" onclick="document.getElementById('photoInput').value=''">Clear</button>
              <hr>
              <details class="mb-3">
                <summary class="cursor-pointer text-primary">Or paste a data URL directly</summary>
                <textarea id="photoDataUrl" class="form-control mt-2" rows="3" placeholder="Paste your image data URL here..."></textarea>
                <button class="btn btn-secondary mt-2" onclick="applyDataUrl()">Apply Data URL</button>
              </details>
            </div>
          </section>

          <section id="settings" class="section d-none">
            <h2 class="mb-3">Contact Settings</h2>
            <div class="project-form">
              <div class="mb-3">
                <label class="form-label">Formspree Endpoint (optional)</label>
                <input type="text" id="formspreeEndpoint" class="form-control" placeholder="https://formspree.io/f/your-form-id">
                <small class="text-muted d-block mt-1">If set, contact form submissions will be sent to this endpoint and forwarded to your email by Formspree.</small>
              </div>
              <div class="d-flex gap-2">
                <button class="btn btn-primary" onclick="saveSettings()">Save Settings</button>
                <button class="btn btn-outline-secondary" onclick="clearSettings()">Clear</button>
              </div>
            </div>
          </section>

          <section id="list" class="section d-none">
            <h2 class="mb-3">Projects</h2>
            <button class="btn btn-primary mb-3" onclick="switchSection('new')">+ Add Project</button>
            <div id="projectsList"></div>
          </section>

          <section id="new" class="section d-none">
            <h2 class="mb-3">Add New Project</h2>
            <form id="projectForm" class="project-form" onsubmit="saveProject(event)">
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label class="form-label">Project ID <span class="text-danger">*</span></label>
                  <input type="text" class="form-control" id="projId" placeholder="e.g. p13" required>
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">Title <span class="text-danger">*</span></label>
                  <input type="text" class="form-control" id="projTitle" placeholder="Project title" required>
                </div>
              </div>

              <div class="row">
                <div class="col-md-6 mb-3">
                  <label class="form-label">Category <span class="text-danger">*</span></label>
                  <select class="form-select" id="projCategory" required>
                    <option value="">Choose...</option>
                    <option value="web">Web</option>
                    <option value="design">Design</option>
                    <option value="content">Content</option>
                  </select>
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">Date <span class="text-danger">*</span></label>
                  <input type="date" class="form-control" id="projDate" required>
                </div>
              </div>

              <div class="mb-3">
                <label class="form-label">Short Description <span class="text-danger">*</span></label>
                <input type="text" class="form-control" id="projShortDesc" placeholder="Brief one-liner" required>
              </div>

              <div class="mb-3">
                <label class="form-label">Long Description <span class="text-danger">*</span></label>
                <textarea class="form-control" id="projLongDesc" rows="4" placeholder="Detailed description" required></textarea>
              </div>

              <div class="mb-3">
                <label class="form-label">Main Image URL <span class="text-danger">*</span></label>
                <input type="url" class="form-control" id="projImage" placeholder="https://..." required>
              </div>

              <div class="mb-3">
                <label class="form-label">Gallery Image URLs (one per line)</label>
                <textarea class="form-control" id="projGallery" rows="3" placeholder="https://...&#10;https://..."></textarea>
              </div>

              <div class="mb-3">
                <label class="form-label">Tags</label>
                <div style="display:flex; gap: 0.5rem; margin-bottom: 0.5rem;">
                  <input type="text" class="form-control" id="tagInput" placeholder="Type tag and press Enter" style="flex:1;">
                  <button type="button" class="btn btn-outline-secondary" onclick="addTag()">Add Tag</button>
                </div>
                <div class="tag-input" id="tagsList"></div>
              </div>

              <div class="mb-3">
                <label class="form-label">Project Link</label>
                <input type="url" class="form-control" id="projLink" placeholder="https://..." value="#">
              </div>

              <div class="d-flex gap-2">
                <button type="submit" class="btn btn-primary">Save Project</button>
                <button type="button" class="btn btn-outline-secondary" onclick="resetForm(); switchSection('list')">Cancel</button>
              </div>
            </form>
          </section>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/admin.js"></script>
  </body>
</html>
